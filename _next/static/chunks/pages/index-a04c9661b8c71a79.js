(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(4135)}])},4135:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var s=a(5893),n=a(7294);let r=["World History","Science","Pop Culture","Literature","Sports","Geography"],o=[200,400,600,800,1e3],l=e=>({text:"This clue worth $"+e+" needs to be filled in",answer:"What is the answer?",value:e,revealed:!1,answered:!1,dailyDouble:!1,ruleViolation:null,ratings:[]}),i=()=>r.map(e=>({title:e,questions:o.map(l),difficultyAdjustments:{200:0,400:0,600:0,800:0,1e3:0}})),c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,t=[];for(let a=1;a<=e;a++)t.push({name:"Player ".concat(a),score:0,active:1===a});return t};function d(){let[e,t]=(0,n.useState)(3),[a,d]=(0,n.useState)({categories:i(),players:c(e),currentPlayer:0,finalJeopardyActive:!1}),[u,h]=(0,n.useState)(null),[g,m]=(0,n.useState)(!1),[p,y]=(0,n.useState)("openai"),[f,x]=(0,n.useState)(""),[j,v]=(0,n.useState)(.7),[b,w]=(0,n.useState)('Create a high-quality Jeopardy! game board with diverse, challenging, and well-structured categories and questions. Follow these key principles:\n\n- Make clues SPECIFIC with ONE unambiguous answer (e.g., NOT "This East Asian country has a unique blend of traditional culture" - too vague)\n- Use clever, engaging category titles\n- Ensure gradual difficulty increase from $200 to $1000 questions\n- Make clues factually accurate and verifiable\n- Format answers as questions ("Who is/What is...")\n- Do not repeat concepts across categories\n- NEVER include answer words in the clue text'),[N,S]=(0,n.useState)(""),[C,k]=(0,n.useState)(!1),[I,q]=(0,n.useState)(!1),[A,E]=(0,n.useState)("standard"),[P,D]=(0,n.useState)({}),[O,T]=(0,n.useState)(null),[J,_]=(0,n.useState)(!1),[F,M]=(0,n.useState)([]),[R,$]=(0,n.useState)(!1),[L,G]=(0,n.useState)(!1),[B,W]=(0,n.useState)(""),[U,z]=(0,n.useState)(!1),[X,V]=(0,n.useState)(null),[Y,H]=(0,n.useState)(null),[Q,K]=(0,n.useState)(!1),[Z,ee]=(0,n.useState)([]),[et,ea]=(0,n.useState)(e);(0,n.useEffect)(()=>{try{let e=localStorage.getItem("jeopardy_api_key");e&&x(e);let t=localStorage.getItem("jeopardy_ai_provider");t&&y(t);let a=localStorage.getItem("jeopardy_system_message");a&&w(a);let s=localStorage.getItem("jeopardy_temperature");s&&v(parseFloat(s));let n=localStorage.getItem("jeopardy_saved_boards");if(n)try{let e=JSON.parse(n);M(e)}catch(e){}let r=localStorage.getItem("jeopardy_theme");r&&E(r)}catch(e){}},[]),(0,n.useEffect)(()=>{localStorage.setItem("jeopardy_theme",A)},[A]),(0,n.useEffect)(()=>{F.length>0&&localStorage.setItem("jeopardy_saved_boards",JSON.stringify(F))},[F]);let es=(e,t)=>{let s=a.categories[e].questions[t];if(s.answered)return;h({categoryIndex:e,questionIndex:t}),m(!1),D({});let n=[...a.categories];n[e].questions[t].revealed=!0,d({...a,categories:n}),setTimeout(()=>{window.scrollTo(0,0),document.body.style.overflow="hidden"},100),s.dailyDouble?(T(null),_(!0)):_(!1)},en=e=>{if(!u)return;let{categoryIndex:t,questionIndex:s}=u;a.categories[t].questions[s];let n=a.players[a.currentPlayer].score,r=Math.max(n,1e3),o=e;e<100&&(o=100),e>r&&(o=r),T(o=100*Math.round(o/100)),_(!1)},er=e=>{D(t=>({...t,[e]:!t[e]}))},eo=(e,t)=>{let a=e[t];a.difficultyAdjustments||(a.difficultyAdjustments={200:0,400:0,600:0,800:0,1e3:0});let s={};a.questions.forEach(e=>{if(e.ratings&&e.ratings.length>0){let t=e.value;s[t]||(s[t]=[]),s[t]=[...s[t],...e.ratings]}}),Object.keys(s).forEach(e=>{let t=parseInt(e,10),n=s[t];if(n&&n.length>=3){let e=n.filter(e=>"good"===e.rating).length,s=e/n.length;s>.65?a.difficultyAdjustments[t]=Math.min((a.difficultyAdjustments[t]||0)+1,2):s>.85?a.difficultyAdjustments[t]=2:s<.35?a.difficultyAdjustments[t]=Math.max((a.difficultyAdjustments[t]||0)-1,-2):s<.15&&(a.difficultyAdjustments[t]=-2)}});try{let e="jeopardy_difficulty_adjustments",t=localStorage.getItem(e),s=t?JSON.parse(t):{};s[a.title]=a.difficultyAdjustments,localStorage.setItem(e,JSON.stringify(s));let n="jeopardy_question_difficulty_ratings",r=localStorage.getItem(n)?JSON.parse(localStorage.getItem(n)||"[]"):[];a.questions.forEach(e=>{e.ratings&&e.ratings.length>0&&e.ratings.forEach(t=>{r.push({category:a.title,value:e.value,clue:e.text,answer:e.answer,rating:t.rating,timestamp:t.timestamp})})}),localStorage.setItem(n,JSON.stringify(r))}catch(e){console.error("Error saving difficulty adjustments:",e)}},el=(e,t)=>{let s;if(!u)return;let{categoryIndex:n,questionIndex:r}=u,o=a.categories[n].questions[r].value;a.categories[n].questions[r].dailyDouble&&null!==O&&(o=O);let l=[...a.players],i=void 0!==t?t:a.currentPlayer;l[i].score+=e?o:-o;let c=[...a.categories],g={rating:e?"good":"bad",timestamp:new Date().toISOString()};c[n].questions[r].ratings||(c[n].questions[r].ratings=[]),c[n].questions[r].ratings.push(g),c[n].questions[r].answered=!0,eo(c,n),s=e&&void 0!==t?t:(a.currentPlayer+1)%a.players.length,d({...a,categories:c,players:l,currentPlayer:s}),document.body.style.overflow="",h(null),m(!1),T(null),_(!1)},ei=e=>{U&&V({index:e,title:a.categories[e].title})},ec=(e,t)=>{if(!U)return;let s=a.categories[e].questions[t];H({categoryIndex:e,questionIndex:t,text:s.text,answer:s.answer,value:s.value,dailyDouble:s.dailyDouble})},ed=(e,t,a)=>{let s=e=>e.toLowerCase().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()?]/g,""),n=s(e),r=s(t),o=s(a),l=n.split(/\s+/).filter(e=>e.length>2),i=r.split(/\s+/).filter(e=>e.length>2),c=o.split(/\s+/),d=[...l,...i],u=d.filter(e=>c.some(t=>t===e));if(u.length>0)return{valid:!1,reason:"Answer contains words from the clue or category: ".concat(u.join(", "))};let h=["known for","famous for","renowned for","recognized for","celebrated for","this country","this nation","this place","this region","this area","this city","this culture","this tradition","unique blend","rich history","diverse landscape"].some(e=>r.includes(s(e)));return h?{valid:!1,reason:"Question may be too vague and could accept multiple answers. Consider adding more specific, distinguishing details."}:{valid:!0}},eu=(e,t,a,s)=>{try{let n=JSON.parse(localStorage.getItem("jeopardy_format_issues")||"[]");n.push({category:e,clue:t,answer:a,issue:s,timestamp:new Date().toISOString()}),localStorage.setItem("jeopardy_format_issues",JSON.stringify(n))}catch(e){}},eh=()=>a.categories.every(e=>e.questions.every(e=>e.answered)),eg=async()=>{if(!f){alert("Please enter an API key");return}if(!f.trim()){alert("Please enter a valid API key");return}localStorage.setItem("jeopardy_api_key",f),localStorage.setItem("jeopardy_ai_provider",p),localStorage.setItem("jeopardy_system_message",b),localStorage.setItem("jeopardy_temperature",j.toString()),q(!0);try{a.categories.map(e=>e.title);let e="";try{let t=localStorage.getItem("jeopardy_difficulty_adjustments"),a=localStorage.getItem("jeopardy_question_difficulty_ratings"),s=a?JSON.parse(a):[];if(t){let a=JSON.parse(t);Object.keys(a).forEach(t=>{let n=a[t],r=Object.values(n).some(e=>0!==e);if(r){e+='For category similar to "'.concat(t,'", adjust difficulty as follows:\n');let a=s.filter(e=>e.category.toLowerCase()===t.toLowerCase()||e.category.toLowerCase().includes(t.toLowerCase())||t.toLowerCase().includes(e.category.toLowerCase()));Object.keys(n).forEach(t=>{let s=parseInt(t,10),r=n[s];if(0!==r){if(r>0){e+="- For $".concat(s," questions: Make them ").concat(r>1?"significantly":"somewhat"," HARDER with more specific details and specialized knowledge\n");let t=a.filter(e=>e.value===s&&"good"===e.rating).slice(0,2);t.length>0&&(e+="  Examples of questions that were too easy:\n",t.forEach(t=>{e+='  * "'.concat(t.clue,'" → "').concat(t.answer,'"\n')}))}else if(r<0){e+="- For $".concat(s," questions: Make them ").concat(r<-1?"significantly":"somewhat"," EASIER with more common knowledge and simpler concepts\n");let t=a.filter(e=>e.value===s&&"bad"===e.rating).slice(0,2);t.length>0&&(e+="  Examples of questions that were too difficult:\n",t.forEach(t=>{e+='  * "'.concat(t.clue,'" → "').concat(t.answer,'"\n')}))}}}),e+="\n"}})}}catch(e){console.error("Error loading difficulty adjustments for AI prompt:",e)}let t=N?"".concat(b,"\n\n").concat(N):b,s="Create a new Jeopardy game board with EXACTLY 6 creative categories.\n        ".concat(t?"Use the following reference content for creating specialized categories and questions: ".concat(t):"",'\n        \n        For each category, create 5 clues with values from $200 to $1000, ensuring they increase in difficulty.\n        \n        Important:\n        - YOU MUST CREATE EXACTLY 6 CATEGORIES, no more and no less\n        - Create entirely new category titles that are clever and engaging\n        - Clues should be statements or facts, NOT questions\n        - Responses should always start with "What is" or "Who is" etc.\n        - Do not include the answer within the clue text\n        - Make sure clues don\'t give away the answer directly\n        - Include a balanced mix of topics and difficulty levels\n        - Mark EXACTLY 2 clues total as "dailyDouble: true" (these are special high-value clues)\n        - Do not add more than 2 Daily Doubles in total across all categories\n        ').concat(e?"\n\nDIFFICULTY ADJUSTMENT GUIDANCE based on player performance:\n".concat(e):"",'\n        \n        Format your response as JSON with this exact structure:\n        {\n          "categories": [\n            {\n              "title": "Category Name",\n              "questions": [\n                {\n                  "text": "The clue text that would be shown to contestants",\n                  "answer": "What is the correct response?",\n                  "value": 200,\n                  "dailyDouble": false\n                },\n                ... and so on for values 400, 600, 800, 1000\n              ]\n            },\n            ... repeat for exactly 6 categories, numbered from 0 to 5\n          ]\n        }\n        \n        IMPORTANT REQUIREMENTS:\n        1. The response MUST include EXACTLY 6 categories in the "categories" array.\n        2. There MUST be EXACTLY 2 questions total marked as dailyDouble: true across all categories.'),n={openai:"https://api.openai.com/v1/chat/completions",mistral:"https://api.mistral.ai/v1/chat/completions",deepseek:"https://api.deepseek.com/v1/chat/completions",meta:"https://api.together.xyz/v1/chat/completions",gemini:"https://generativelanguage.googleapis.com/v1/models/gemini-1.5-pro:generateContent"},i=0,c=!1,u=null,h={openai:{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({model:"gpt-4",messages:[{role:"user",content:s}],max_tokens:4e3,temperature:j})},mistral:{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({model:"mistral-large-latest",messages:[{role:"user",content:s}],temperature:j})},deepseek:{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({model:"deepseek-chat",messages:[{role:"user",content:s}],temperature:j})},meta:{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(f)},body:JSON.stringify({model:"meta-llama-3-70b-instruct",messages:[{role:"user",content:s}],temperature:j})},gemini:{method:"POST",headers:{"Content-Type":"application/json","x-goog-api-key":f},body:JSON.stringify({contents:[{role:"user",parts:[{text:s}]}],generationConfig:{temperature:j,maxOutputTokens:4e3}})}};for(;i<=4&&!c;)try{let e,t;i>0&&console.log("Retrying API request (attempt ".concat(i," of ").concat(4,")...")),console.log("Making request to ".concat(p," API").concat(p!=p?" (via CORS proxy)":"",":"),{endpoint:n[p],method:h[p].method,headers:{...h[p].headers,"x-api-key":"***REDACTED***"}});let s={...h[p],mode:"cors",credentials:"omit"};if(p.includes("Proxy")&&"claudeProxy2"===p&&s.headers){let e={...s.headers};e["X-Requested-With"]="XMLHttpRequest",s.headers=e}let g=await fetch(n[p],s);if(!g.ok){let e="";if(429===g.status)e="Rate limit exceeded. Waiting and retrying...",await new Promise(e=>setTimeout(e,2e3*(i+1)));else if(401===g.status||403===g.status){let e=await g.text();throw console.error("Auth error details:",e),Error("Authentication failed: ".concat(g.status," ").concat(g.statusText,". Please check that your API key is valid, has not expired, and has the correct format."))}else if(0===g.status)throw console.error("Likely CORS error - no response from server"),Error("Network error connecting to the API. Please try using a different AI provider.");else if(g.status>=500)e="The AI service is currently experiencing issues. Retrying...",await new Promise(e=>setTimeout(e,1500));else{let e=await g.text();throw console.error("API error details:",e),Error("API request failed: ".concat(g.status," ").concat(g.statusText,". ").concat(e?"Details: ".concat(e):""))}if(u=Error(e),429===g.status||g.status>=500){i++;continue}throw u}c=!0;let m=await g.json(),y="";switch(p){case"openai":case"mistral":case"deepseek":case"meta":y=m.choices[0].message.content;break;case"gemini":y=m.candidates[0].content.parts[0].text}try{let t=y.match(/```(?:json)?\s*(\{[\s\S]*?\})\s*```/);if(t)e=[t[1]],console.log("Found JSON in code block");else{let t=/(\{(?:[^{}]|(?:\{(?:[^{}]|(?:\{(?:[^{}]|(?:\{[^{}]*\}))*\}))*\}))*\})/g,a=y.match(t);if(a&&a.length>0)e=[a.sort((e,t)=>t.length-e.length)[0]],console.log("Found JSON with balanced brace matching");else{let t=y.match(/\{[\s\S]*?\}/g);t?(e=[t.sort((e,t)=>t.length-e.length)[0]],console.log("Found JSON by simple brace matching")):(e=y.match(/\{[\s\S]*\}/),console.log("Using fallback JSON extraction"))}}}catch(t){console.error("Error in JSON extraction:",t),e=y.match(/\{[\s\S]*\}/)}if(!e)throw console.error("Failed to extract JSON from:",y.substring(0,500)+"..."),Error("Could not find valid JSON in the response");let f=e[0];try{f=(f=(f=f.replace(/[\u0000-\u001F\u007F-\u009F]/g," ")).replace(/"(?:[^"\\]|\\.)*"/g,function(e){return e.replace(/\\(?!["\\/bfnrt])/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\f/g,"\\f")})).replace(/,\s*}/g,"}").replace(/,\s*\]/g,"]").replace(/"\s+"/g,'" "').replace(/"\{/g,"{").replace(/\}"/g,"}").replace(/"\[/g,"[").replace(/\]"/g,"]");let e=f.split("\n");e.length>=13&&(e[12]=e[12].replace(/(".*?)([\u0000-\u001F])(.+?")/g,"$1\\$2$3"),f=e.join("\n")),f=f.replace(/"(?:[^"\\]|\\["\\bfnrt])*"/g,function(e){return e.replace(/\\([^"\\bfnrt/])/g,"\\\\$1")})}catch(e){console.error("Error during JSON sanitization:",e)}let x=!1;try{t=JSON.parse(f),x=!0,console.log("Successfully parsed JSON on first attempt")}catch(e){console.error("Initial JSON parsing error:",e),console.log("Attempting more aggressive JSON cleaning...");try{let e=f.replace(/\\(?!["\\/bfnrt])/g,"\\\\").replace(/[\n\r\t\f]/g," ").replace(/"\s+"/g,'" "').replace(/([^\\])"/g,'$1\\"').replace(/\\\\"/g,'\\"').replace(/\\"/g,'\\"');t=JSON.parse(e),x=!0,console.log("Successfully parsed JSON on second attempt")}catch(e){console.error("Second parsing attempt failed:",e);try{let e=f.match(/"categories"\s*:\s*(\[[\s\S]*?\])/);if(e){let a='{"categories":'.concat(e[1],"}");t=JSON.parse(a),x=!0,console.log("Successfully parsed partial JSON (categories only)")}else throw Error("Couldn't find categories array")}catch(e){console.error("Third parsing attempt failed:",e);try{let e=f.replace(/("[^"]*)(")([^"]*")/g,'$1\\"$3').replace(/([\[\{,]\s*)([^,\{\[\]\"\d-])/g,'$1"$2').replace(/([^\s\]\}"])(\s*[\]\},])/g,'$1"$2');t=JSON.parse(e),x=!0,console.log("Successfully parsed JSON on fourth attempt")}catch(e){console.error("Final parsing attempt failed:",e)}}}}x||(console.log("Creating mock data as fallback"),t={categories:r.map((e,t)=>({title:"".concat(e," (AI Error)"),questions:o.map((e,t)=>({text:"JSON parse error occurred. This is a fallback question ".concat(t+1," for ").concat(e," points."),answer:"What is a JSON parsing error?",value:e,revealed:!1,answered:!1,dailyDouble:!1}))}))});let j=t.categories.map(e=>{let t={200:0,400:0,600:0,800:0,1e3:0};try{let a=localStorage.getItem("jeopardy_difficulty_adjustments");if(a){let s=JSON.parse(a),n=Object.keys(s).find(t=>t.toLowerCase().includes(e.title.toLowerCase())||e.title.toLowerCase().includes(t.toLowerCase()));n&&(t=s[n],console.log('Applied difficulty adjustments from similar category "'.concat(n,'" to "').concat(e.title,'"')))}}catch(e){console.error("Error loading difficulty adjustments:",e)}let a=e.questions.map(t=>{let a=ed(e.title,t.text,t.answer);return a.valid||(eu(e.title,t.text,t.answer,a.reason||"Unknown rule violation"),console.warn("Rule violation in generated question: ".concat(a.reason))),{text:t.text,answer:t.answer,value:t.value,revealed:!1,answered:!1,dailyDouble:!0===t.dailyDouble,ruleViolation:a.valid?null:a.reason,ratings:[]}});return{title:e.title,questions:a,difficultyAdjustments:t}});if(j.length<6){console.log("API returned only ".concat(j.length," categories instead of 6. Adding missing categories."));let e=6-j.length,t=r.slice(0,e).map(e=>({title:"".concat(e," (Generated)"),questions:o.map(l)}));j=[...j,...t]}else j.length>6&&(console.log("API returned ".concat(j.length," categories instead of 6. Trimming to 6 categories.")),j=j.slice(0,6));let v=0,b=[];if(j.forEach((e,t)=>{e.questions.forEach((e,a)=>{e.dailyDouble&&v++,b.push({categoryIndex:t,questionIndex:a})})}),console.log("Board has ".concat(v," Daily Doubles (target: 2)")),v>2){console.log("Removing ".concat(v-2," excess Daily Doubles"));let e=[];j.forEach((t,a)=>{t.questions.forEach((t,s)=>{t.dailyDouble&&e.push({categoryIndex:a,questionIndex:s})})}),e.sort(()=>Math.random()-.5);for(let t=0;t<e.length-2;t++){let{categoryIndex:a,questionIndex:s}=e[t];j[a].questions[s].dailyDouble=!1}}else if(v<2){console.log("Adding ".concat(2-v," missing Daily Doubles")),b.sort(()=>Math.random()-.5);let e=b.filter(e=>{let{categoryIndex:t,questionIndex:a}=e;return!j[t].questions[a].dailyDouble});for(let t=0;t<2-v&&t<e.length;t++){let{categoryIndex:a,questionIndex:s}=e[t];j[a].questions[s].dailyDouble=!0}}d({...a,categories:j}),k(!1);return}catch(e){if(u=e,console.error("API request error:",e),"TypeError"===e.name){console.log("Network error detected - this is often a CORS issue or network connectivity problem");let e=Error("Network error when trying to connect to the API. This might be due to:\n1. CORS restrictions (browser security preventing direct API access)\n2. Network connectivity issues\n3. Ad blockers or privacy extensions blocking the request\n4. VPN or proxy issues\n\n"+"".concat("Consider trying a different API provider or check your network connection.","\n\n")+'Try these solutions:\n- Try using a different AI provider (like OpenAI or Mistral)\n- Check your ad blockers and disable them for this site\n- Make sure your API key format is correct (Claude API keys start with "sk-ant-")\n- Try using a different browser (Chrome tends to work best)\n- Verify your internet connection is stable\n- Try temporarily disabling any VPN services');throw e}if((e instanceof TypeError||"string"==typeof e.message&&(e.message.includes("Rate limit exceeded")||e.message.includes("experiencing issues")))&&++i<=4){console.log("Request failed, retrying (".concat(i,"/").concat(4,"):"),e),await new Promise(e=>setTimeout(e,1e3*Math.pow(2,i)));continue}throw e}if(!c&&u)throw u;k(!1)}catch(s){console.error("Error generating questions:",s);let e=s instanceof Error?s.message:String(s),t=document.createElement("div");t.className="error-notification",t.innerHTML='\n        <div class="error-content">\n          <h3>Question Generation Failed</h3>\n          <p>'.concat(e,"</p>\n          <button>Close</button>\n        </div>\n      ");let a=t.querySelector("button");a&&a.addEventListener("click",()=>{document.body.removeChild(t)}),document.body.appendChild(t)}finally{q(!1)}},em=e=>{if(e>=0&&e<F.length){let t=F[e];window.confirm('Load "'.concat(t.name,'"? Current game progress will be lost.'))&&(d(t.data),h(null),m(!1),G(!1))}},ep=(e,t)=>{t.stopPropagation(),window.confirm('Delete "'.concat(F[e].name,'"? This cannot be undone.'))&&M(t=>t.filter((t,a)=>a!==e))};return(0,s.jsxs)("div",{className:"jeopardy-game ".concat(A),children:[(0,s.jsxs)("div",{className:"game-board",children:[(0,s.jsx)("h1",{className:"game-title",children:"Jeopardy!"}),(0,s.jsxs)("div",{className:"game-controls",children:[(0,s.jsx)("button",{onClick:()=>k(!C),children:"AI Settings & Generate"}),(0,s.jsx)("button",{onClick:()=>z(!U),children:U?"Close Editor":"Edit Board"}),(0,s.jsxs)("button",{onClick:()=>{ee([...a.players]),ea(a.players.length),K(!0)},children:["Players (",a.players.length,")"]}),(0,s.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to reset the game? All progress will be lost.")&&(d({categories:i(),players:c(e),currentPlayer:0,finalJeopardyActive:!1}),h(null),m(!1))},children:"Reset Game"}),(0,s.jsx)("button",{onClick:()=>{(eh()||window.confirm("Not all questions have been answered. Are you sure you want to proceed to Final Jeopardy?"))&&d({...a,finalJeopardyActive:!0})},disabled:a.finalJeopardyActive,children:"Final Jeopardy"}),(0,s.jsxs)("div",{className:"save-load-controls",children:[(0,s.jsx)("button",{className:"save-button",onClick:()=>$(!0),children:"\uD83D\uDCBE Save Board"}),(0,s.jsxs)("button",{className:"load-button",onClick:()=>G(!0),children:["\uD83D\uDCC2 Load Board (",F.length,")"]})]}),(0,s.jsxs)("select",{value:A,onChange:e=>E(e.target.value),className:"theme-selector",children:[(0,s.jsx)("option",{value:"standard",children:"Standard Theme"}),(0,s.jsx)("option",{value:"dark",children:"Dark Theme"}),(0,s.jsx)("option",{value:"retro",children:"Retro Theme"})]})]}),C&&(0,s.jsx)("div",{className:"settings-modal",children:(0,s.jsxs)("div",{className:"settings-content",children:[(0,s.jsx)("h2",{children:"AI Settings"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"AI Provider:"}),(0,s.jsxs)("select",{value:p,onChange:e=>y(e.target.value),children:[(0,s.jsx)("option",{value:"openai",children:"GPT-4 (OpenAI)"}),(0,s.jsx)("option",{value:"gemini",children:"Gemini 1.5 Pro (Google)"}),(0,s.jsx)("option",{value:"mistral",children:"Mistral AI"}),(0,s.jsx)("option",{value:"deepseek",children:"DeepSeek"}),(0,s.jsx)("option",{value:"openrouter",children:"OpenRouter"})]})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"API Key:"}),(0,s.jsx)("input",{type:"password",value:f,onChange:e=>x(e.target.value),placeholder:"Enter your API key"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{className:"label-text",children:"Temperature:"}),(0,s.jsx)("span",{className:"label-hint",children:"Higher values = more creative/varied results (0.0-1.0)"})]}),(0,s.jsxs)("div",{className:"temperature-control",children:[(0,s.jsx)("input",{type:"range",min:"0",max:"1",step:"0.1",value:j,onChange:e=>v(parseFloat(e.target.value)),className:"temperature-slider"}),(0,s.jsx)("span",{className:"temperature-value",children:j})]})]}),(0,s.jsxs)("div",{className:"form-group system-message-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{className:"label-text",children:"System Message:"}),(0,s.jsx)("span",{className:"label-hint",children:"Instructions for how the AI should generate questions"})]}),(0,s.jsx)("textarea",{value:b,onChange:e=>w(e.target.value),placeholder:"Instructions for the AI (e.g., 'Create challenging academic questions suitable for high school students')",rows:5,className:"system-message-input"})]}),(0,s.jsxs)("div",{className:"form-group reference-text-group",children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("span",{className:"label-text",children:"Reference Text (Optional):"}),(0,s.jsx)("span",{className:"label-hint",children:"Add content to generate subject-specific questions"})]}),(0,s.jsx)("textarea",{value:N,onChange:e=>S(e.target.value),placeholder:"Paste text, articles, or lesson material that should be used as the basis for questions",rows:5,className:"reference-text-input"})]}),(0,s.jsxs)("div",{className:"button-group",children:[(0,s.jsx)("button",{onClick:eg,disabled:I,children:I?"Generating...":"Save & Generate"}),(0,s.jsx)("button",{onClick:()=>k(!1),children:"Cancel"})]})]})}),a.finalJeopardyActive?(0,s.jsxs)("div",{className:"final-jeopardy",children:[(0,s.jsx)("h2",{children:"Final Jeopardy"}),(0,s.jsx)("p",{children:"Coming soon!"}),(0,s.jsx)("button",{onClick:()=>{alert("Final Jeopardy functionality will be implemented in a future update.")},children:"Continue"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"categories-row",children:a.categories.map((e,t)=>(0,s.jsxs)("div",{className:"category-header ".concat(U?"editable":""),onClick:()=>ei(t),children:[e.title,U&&(0,s.jsx)("div",{className:"edit-icon",children:"✏️"})]},t))}),[0,1,2,3,4].map(e=>(0,s.jsx)("div",{className:"questions-row",children:a.categories.map((t,a)=>{let n=t.questions[e];return(0,s.jsx)("div",{className:"question-cell ".concat(n.answered?"answered":""," ").concat(U?"editable":""," ").concat(n.dailyDouble&&n.revealed?"daily-double":""),onClick:()=>{U?ec(a,e):es(a,e)},children:(0,s.jsxs)("div",{className:"question-value-container",children:[n.answered&&!U?"":(0,s.jsxs)(s.Fragment,{children:["$".concat(n.value),n.dailyDouble&&!n.answered&&U&&(0,s.jsx)("div",{className:"daily-double-indicator",children:"DD"}),U&&t.difficultyAdjustments&&0!==t.difficultyAdjustments[n.value]&&(0,s.jsxs)("div",{className:"difficulty-indicator ".concat(t.difficultyAdjustments[n.value]>0?"harder":"easier"),children:[t.difficultyAdjustments[n.value]>0?"↑":"↓",Math.abs(t.difficultyAdjustments[n.value])]})]}),U&&(0,s.jsx)("div",{className:"edit-icon",children:"✏️"})]})},"".concat(a,"-").concat(e))})},e))]}),u&&(0,s.jsx)("div",{className:"question-view",children:(0,s.jsx)("div",{className:"question-content",children:a.categories[u.categoryIndex].questions[u.questionIndex].dailyDouble&&J?(0,s.jsxs)("div",{className:"daily-double-reveal",children:[(0,s.jsx)("h2",{children:"Daily Double!"}),(0,s.jsx)("div",{className:"daily-double-animation"}),(0,s.jsxs)("div",{className:"daily-double-wager",children:[(0,s.jsxs)("p",{className:"wager-instructions",children:[a.players[a.currentPlayer].name,", enter your wager:"]}),(0,s.jsxs)("div",{className:"wager-info",children:[(0,s.jsxs)("p",{children:["Current score: $",a.players[a.currentPlayer].score]}),(0,s.jsxs)("p",{children:["Maximum wager: $",Math.max(a.players[a.currentPlayer].score,1e3)]}),(0,s.jsx)("p",{className:"wager-note",children:"Wagers must be in $100 increments"})]}),(0,s.jsxs)("div",{className:"wager-input-container",children:[(0,s.jsx)("input",{type:"number",className:"wager-input",placeholder:"Enter wager",min:100,max:Math.max(a.players[a.currentPlayer].score,1e3),step:100,onChange:e=>{let t=parseInt(e.target.value)||0;T(100*Math.round(t/100))}}),(0,s.jsx)("button",{className:"wager-button",onClick:()=>en(O||a.categories[u.categoryIndex].questions[u.questionIndex].value),children:"Confirm Wager"})]})]})]}):(0,s.jsxs)(s.Fragment,{children:[a.categories[u.categoryIndex].questions[u.questionIndex].dailyDouble&&!J?(0,s.jsxs)("div",{className:"daily-double-question",children:[(0,s.jsxs)("div",{className:"daily-double-header",children:[(0,s.jsx)("h2",{children:"Daily Double"}),(0,s.jsxs)("p",{className:"wager-display",children:["Wager: $",O]})]}),(0,s.jsx)("p",{className:"question-text",children:a.categories[u.categoryIndex].questions[u.questionIndex].text})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("h2",{children:["$",a.categories[u.categoryIndex].questions[u.questionIndex].value]}),(0,s.jsx)("p",{className:"question-text",children:a.categories[u.categoryIndex].questions[u.questionIndex].text})]}),g&&(0,s.jsxs)("div",{className:"answer",children:[(0,s.jsx)("h3",{children:"Correct Response:"}),(0,s.jsx)("p",{className:"correct-response",children:a.categories[u.categoryIndex].questions[u.questionIndex].answer})]}),(0,s.jsxs)("div",{className:"question-controls",children:[(0,s.jsxs)("div",{className:"button-row",children:[(0,s.jsx)("button",{onClick:()=>{m(!g)},children:g?"Hide Response":"Show Response"}),g&&(0,s.jsx)("button",{className:"back-button",onClick:()=>{if(u){let{categoryIndex:e,questionIndex:t}=u,s=[...a.categories];s[e].questions[t].answered=!0,d({...a,categories:s})}document.body.style.overflow="",h(null),m(!1),T(null),_(!1)},children:"Return to Board (No Points)"})]}),g?(0,s.jsxs)("div",{className:"player-selection",children:[(0,s.jsx)("h4",{children:"Award Points To:"}),(0,s.jsx)("div",{className:"player-answer-buttons",children:a.players.map((e,t)=>(0,s.jsxs)("div",{className:"player-answer-option",children:[(0,s.jsx)("div",{className:"player-name",children:e.name}),(0,s.jsxs)("div",{className:"answer-buttons",children:[(0,s.jsx)("button",{className:"correct-button",onClick:()=>el(!0,t),children:"Correct"}),(0,s.jsx)("button",{className:"incorrect-button",onClick:()=>el(!1,t),children:"Incorrect"})]})]},t))}),(0,s.jsxs)("div",{className:"multi-deduction",children:[(0,s.jsx)("h4",{children:"Deduct From Multiple Players"}),(0,s.jsx)("div",{className:"player-checkboxes",children:a.players.map((e,t)=>(0,s.jsxs)("div",{className:"player-checkbox",onClick:()=>er(t),children:[(0,s.jsx)("input",{type:"checkbox",id:"incorrect-".concat(t),checked:!!P[t],onChange:()=>{}}),(0,s.jsx)("label",{htmlFor:"incorrect-".concat(t),children:e.name})]},t))}),(0,s.jsx)("button",{className:"deduct-multiple-button",onClick:()=>{if(!u)return;let{categoryIndex:e,questionIndex:t}=u,s=a.categories[e].questions[t].value;a.categories[e].questions[t].dailyDouble&&null!==O&&(s=O);let n=[...a.players];Object.keys(P).forEach(e=>{let t=parseInt(e,10);P[t]&&(n[t].score-=s)});let r=[...a.categories];if(Object.keys(P).length>0){let a={rating:"bad",timestamp:new Date().toISOString()};r[e].questions[t].ratings||(r[e].questions[t].ratings=[]),r[e].questions[t].ratings.push(a)}r[e].questions[t].answered=!0,eo(r,e);let o=(a.currentPlayer+1)%a.players.length;d({...a,categories:r,players:n,currentPlayer:o}),D({}),document.body.style.overflow="",h(null),m(!1),T(null),_(!1)},disabled:0===Object.keys(P).length,children:Object.keys(P).length>0?"Deduct Points from ".concat(Object.keys(P).length," Player").concat(Object.keys(P).length>1?"s":""):"Select Players to Deduct Points"})]})]}):null]})]})})})]}),(0,s.jsx)("div",{className:"scoreboard",children:a.players.map((e,t)=>(0,s.jsxs)("div",{className:"player ".concat(t===a.currentPlayer?"active":""),children:[(0,s.jsx)("h3",{children:e.name}),(0,s.jsxs)("p",{className:"score",children:["$",e.score]})]},t))}),R&&(0,s.jsx)("div",{className:"settings-modal",children:(0,s.jsxs)("div",{className:"settings-content",children:[(0,s.jsx)("h2",{children:"Save Game Board"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Save Name:"}),(0,s.jsx)("input",{type:"text",value:B,onChange:e=>W(e.target.value),placeholder:"My Custom Jeopardy Board",autoFocus:!0})]}),(0,s.jsxs)("div",{className:"button-group",children:[(0,s.jsx)("button",{onClick:()=>{let e=new Date,t=e.toLocaleString();B||W("Jeopardy Board ".concat(t));let s={name:B||"Jeopardy Board ".concat(t),date:t,data:{...a}};M(e=>[...e,s]),$(!1),W(""),alert('Game saved as "'.concat(s.name,'"'))},children:"Save"}),(0,s.jsx)("button",{onClick:()=>$(!1),children:"Cancel"})]})]})}),L&&(0,s.jsx)("div",{className:"settings-modal",children:(0,s.jsxs)("div",{className:"settings-content",children:[(0,s.jsx)("h2",{children:"Load Saved Game"}),F.length>0?(0,s.jsx)("div",{className:"saved-boards-list",children:F.map((e,t)=>(0,s.jsxs)("div",{className:"saved-board-item",onClick:()=>em(t),children:[(0,s.jsxs)("div",{className:"saved-board-info",children:[(0,s.jsx)("h3",{children:e.name}),(0,s.jsxs)("p",{className:"saved-date",children:["Saved on: ",e.date]})]}),(0,s.jsx)("button",{className:"delete-board-button",onClick:e=>ep(t,e),children:"\uD83D\uDDD1️"})]},t))}):(0,s.jsx)("p",{className:"no-saved-boards",children:"No saved boards found."}),(0,s.jsx)("div",{className:"button-group",children:(0,s.jsx)("button",{onClick:()=>G(!1),children:"Close"})})]})}),X&&(0,s.jsx)("div",{className:"editor-modal",children:(0,s.jsxs)("div",{className:"editor-content",children:[(0,s.jsx)("h2",{children:"Edit Category"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Category Title:"}),(0,s.jsx)("input",{type:"text",value:X.title,onChange:e=>V({...X,title:e.target.value}),autoFocus:!0})]}),(0,s.jsxs)("div",{className:"button-group",children:[(0,s.jsx)("button",{onClick:()=>{if(!X)return;let e=[...a.categories];e[X.index].title=X.title,d({...a,categories:e}),V(null)},children:"Save"}),(0,s.jsx)("button",{onClick:()=>V(null),children:"Cancel"})]})]})}),Y&&(0,s.jsx)("div",{className:"editor-modal",children:(0,s.jsxs)("div",{className:"editor-content",children:[(0,s.jsx)("h2",{children:"Edit Clue"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Clue Text:"}),(0,s.jsx)("textarea",{value:Y.text,onChange:e=>H({...Y,text:e.target.value}),rows:4,autoFocus:!0,placeholder:"Enter the clue text here"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Correct Response:"}),(0,s.jsx)("input",{type:"text",value:Y.answer,onChange:e=>H({...Y,answer:e.target.value}),placeholder:"Enter the correct response"})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Value:"}),(0,s.jsxs)("select",{value:Y.value,onChange:e=>H({...Y,value:parseInt(e.target.value,10)}),children:[(0,s.jsx)("option",{value:"200",children:"$200"}),(0,s.jsx)("option",{value:"400",children:"$400"}),(0,s.jsx)("option",{value:"600",children:"$600"}),(0,s.jsx)("option",{value:"800",children:"$800"}),(0,s.jsx)("option",{value:"1000",children:"$1000"})]})]}),(0,s.jsx)("div",{className:"form-group",children:(0,s.jsxs)("div",{className:"daily-double-toggle",children:[(0,s.jsx)("input",{type:"checkbox",id:"dailyDoubleToggle",checked:!0===Y.dailyDouble,onChange:e=>H({...Y,dailyDouble:e.target.checked})}),(0,s.jsx)("label",{htmlFor:"dailyDoubleToggle",children:"Mark as Daily Double"})]})}),(0,s.jsxs)("div",{className:"button-group",children:[(0,s.jsx)("button",{onClick:()=>{if(!Y)return;let{categoryIndex:e,questionIndex:t,text:s,answer:n,value:r,dailyDouble:o}=Y,l=a.categories[e].title,i=ed(l,s,n);if(!i.valid){var c;if(eu(l,s,n,i.reason||"Format issue"),null===(c=i.reason)||void 0===c?void 0:c.includes("too vague")){let e=window.confirm("Warning: This clue may be problematic.\n\n".concat(i.reason,'\n\nFor example, a clue like "This East Asian country is known for its unique blend of traditional and modern culture" could accept multiple answers like Japan, South Korea, China, etc.\n\nDo you want to save anyway?'));if(!e)return}}let u=[...a.categories];u[e].questions[t]={...u[e].questions[t],text:s,answer:n,value:r,dailyDouble:o,ruleViolation:i.valid?null:i.reason},d({...a,categories:u}),H(null)},children:"Save"}),(0,s.jsx)("button",{onClick:()=>H(null),children:"Cancel"})]})]})}),Q&&(0,s.jsx)("div",{className:"editor-modal",children:(0,s.jsxs)("div",{className:"editor-content",children:[(0,s.jsx)("h2",{children:"Player Settings"}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{children:"Number of Players:"}),(0,s.jsxs)("select",{value:et,onChange:e=>{let t=parseInt(e.target.value,10);if(ea(t),t>Z.length){let e=[...Z];for(let a=Z.length+1;a<=t;a++)e.push({name:"Player ".concat(a),score:0,active:!1});ee(e)}else t<Z.length&&ee(Z.slice(0,t))},children:[(0,s.jsx)("option",{value:"2",children:"2 Players"}),(0,s.jsx)("option",{value:"3",children:"3 Players"}),(0,s.jsx)("option",{value:"4",children:"4 Players"})]})]}),Z.map((e,t)=>(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsxs)("label",{children:["Player ",t+1," Name:"]}),(0,s.jsx)("input",{type:"text",value:e.name,onChange:e=>{let a=[...Z];a[t].name=e.target.value,ee(a)}})]},t)),(0,s.jsxs)("div",{className:"button-group",children:[(0,s.jsx)("button",{onClick:()=>{let e;if(et===Z.length)e=[...Z];else if(et>Z.length){e=[...Z];for(let t=Z.length+1;t<=et;t++)e.push({name:"Player ".concat(t),score:0,active:!1})}else e=Z.slice(0,et);d({...a,players:e,currentPlayer:a.currentPlayer>=et?0:a.currentPlayer}),t(et),K(!1)},children:"Save Players"}),(0,s.jsx)("button",{onClick:()=>K(!1),children:"Cancel"})]})]})})]})}var u=a(2179);function h(){let[e,t]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{t(!0)},[]),e)?(0,s.jsx)("main",{className:"flex min-h-screen flex-col items-center justify-between p-4 md:p-8 lg:p-24 bg-black",children:(0,s.jsx)(u.Z,{children:(0,s.jsx)(d,{})})}):(0,s.jsx)("main",{className:"min-h-screen flex flex-col items-center justify-center p-4 bg-black",children:(0,s.jsx)("div",{className:"text-white text-2xl animate-pulse",children:"Loading Jeopardy..."})})}function g(){return(0,s.jsx)(h,{})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);